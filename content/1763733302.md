---
title: Prometheus
show_right_column: true
show_title: true
description: timeseries database to store metrics
slug: 1763733302.md
date: 2025-11-21
draft: false
tags:
  - cloud
  - observability
  - open telemetry
  - federation
  - Hierarchical federation
  - cross service federation
image: https://cdn.jsdelivr.net/gh/homarr-labs/dashboard-icons/svg/prometheus.svg
categories:
  - Notes
references:
  - title: Prometheus docs
    url: https://prometheus.io/docs/prometheus
---

Prometheus it's a service for metrics collection, it's scrapes sources configured statically in configuration files or dynamically through service discovery systems like [kubernetes](/1762772366.md) and stores data in a time series format

![](https://raw.githubusercontent.com/prometheus/prometheus/refs/heads/main/documentation/images/architecture.svg)

The scrape operations happens using http as communication protocol and data are formatted with [open telemetry](https://opentelemetry.io/docs/) (*otel*)

## Prometheus federation

Prometheus allow to pull data from other prometheus istances using the `/federation` API endpoint, this allows prometheus to be deployed in federated environments:

Prometheus Federation can be configured in 2 ways:

- **Hierarchical Federation** prometheus servers are configured in a tree structure
- **Cross service federation** prometheus servers is configured to monitor a prometheus server of another service layer

```mermaid
---
title: Hierarchical federation
---
flowchart TD
subgraph Site1
A@{shape: rect, label: infrastructure1}
B@{shape: rect, label: infrastructure2}
C@{shape: rect, label: infrastructure site1}
end
subgraph Site2
F@{shape: rect, label: infrastructure site2}
G@{shape: rect, label: infrastructure1}
H@{shape: rect, label: infrastructure2}
end
E@{shape: rect, label: global infrastructure}
C --> A & B
F --> G & H
E --> F & C
```

```mermaid
---
title: Cross service federation
---
flowchart TD
subgraph service_level
direction LR
A@{shape: rect, label: prometheus}
B@{shape: rect, label: service1}
C@{shape: rect, label: service2}
end
subgraph infrastructure_level
D@{shape: rect, label: prometheus}
end
infrastructure_level ~~~ service_level
D --> A
```
