<!-- import for the search module, using fuse.js jquery and mark.js-->
<script src="https://cdn.jsdelivr.net/npm/fuse.js@7.1.0"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.0/fuse.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js"></script>
{{ $search := resources.Get "js/search.js" }}
<script src="{{ $search.RelPermalink  }}"></script>
{{ $search := resources.Get "scss/search.scss" | toCSS | minify }}
<link rel="stylesheet" href="{{ $search.RelPermalink }}">

<!-- hidden overlay for global search -->
<div id="searchOverlay" class="search-overlay" onclick="if(event.target === this){ closeOverlay()}">
  <div class="search-overlay-content">
      <input oninput="executeSearch(this.value)"  placeholder="Looks for knowledge" id="search-query" class="search-input">

      <div id="search-results" class="search-results"></div>
      <!-- this template is sucked in by search.js and appended to the search-results div above. So editing here will adjust style -->
      <script id="search-result-template" type="text/x-js-template">
      <a href="${link}">
      <div id="summary-${key}" class="search-summary">
      <h4 >${title}</h4>
      <div class="search-snippet">${snippet}</div>
      ${ isset tags }<div class="search-tags">Tags: ${tags}</div>${ end }
      ${ isset categories }<div class="search-categories">Categories: ${categories}</div>${ end }
      </div>
      </a>
      </script>
  </div>
</div>

<!-- actual button rendered in the partial to call for the overlay -->
<button class="search-trigger" onclick="openOverlay()">
  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <circle cx="11" cy="11" r="8"></circle>
    <path d="m21 21-4.35-4.35"></path>
  </svg>
</button>

